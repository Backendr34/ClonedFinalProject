<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Repair Help</title>
    <link rel="shortcut icon" href="https://placehold.co/16x16/007bff/ffffff?text=ðŸš—"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* Custom styles not easily done with Tailwind */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter as primary font with Roboto fallback */
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
        }

        /* Background Video Styles (kept as requested) */
        #background-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
            opacity: 0.9;
        }

        /* Popup and Overlay Styles (kept from previous version) */
        .popup {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            text-align: center;
            border: none;
        }

        .overlay {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 999;
        }

        .popup .close {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            color: #888;
            font-size: 24px;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .popup .close:hover {
            color: #555;
        }

        .popup img {
            max-width: 100%;
            height: auto;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        /* Help Button Styles (kept from previous version) */
        .help-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #28a745; /* Green color */
            color: white;
            padding: 15px 20px;
            font-size: 16px;
            border: none;
            border-radius: 30px; /* More rounded */
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); /* Enhanced shadow */
            transition: background-color 0.3s ease, transform 0.3s ease;
            z-index: 1010; /* Ensure it's above other elements */
        }

        .help-button:hover {
            background-color: #218838; /* Darker green on hover */
            transform: scale(1.05);
        }

        /* --- New Chatbot Styles --- */
        .car-chatbot-container {
            position: fixed;
            bottom: 20px;
            left: 20px; /* Position on the left as per the new code */
            transform: translateY(1000px); /* Start off-screen */
            transition: transform 0.3s ease-in-out;
            width: 90%;
            max-width: 450px; /* Increased max-width */
            height: 85vh; /* Increased height */
            max-height: 650px; /* Increased max-height */
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            background-color: white;
            z-index: 1000;
            overflow: hidden;
            border: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            font-family: 'Poppins', sans-serif; /* Use Poppins for chatbot */
        }

        .car-chatbot-container.active {
            transform: translateY(0); /* Slide into view */
        }

        .car-chatbot-header {
            text-align: center;
            margin-bottom: 1.5rem;
            flex-shrink: 0; /* Prevent header from shrinking */
        }
        .car-chatbot-header h1{
            color: #003865;
            font-size: 1.6rem; /* Adjusted font size */
            font-weight: 600;
        }
         .car-chatbot-header p{
            color: #4a5568; /* Darker gray for subtitle */
            font-size: 0.95rem; /* Adjusted font size */
         }

        .car-chatbot-messages {
            margin-bottom: 1rem;
            flex-grow: 1;
            overflow-y: auto;
            padding: 0.5rem;
            border-radius: 0.5rem;
            background-color: #f7fafc;
            display: flex;
            flex-direction: column;
            gap: 0.75rem; /* Added gap between messages */
        }
        .car-chatbot-message {
            display: flex;
        }
        .car-chatbot-message-content {
            padding: 0.75rem;
            border-radius: 1.3rem;
            max-width: 85%;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            font-size: 0.95rem; /* Adjusted font size */
            line-height: 1.4; /* Improved line spacing */
        }
        .car-chatbot-message.user .car-chatbot-message-content {
            background-color: #e0f2fe; /* Light blue */
            color: #003865; /* Dark blue */
            margin-left: auto;
        }
        .car-chatbot-message.bot .car-chatbot-message-content {
            background-color: #f0f4c3; /* Light yellow */
            color: #003865; /* Dark blue */
            margin-right: auto;
        }
        .car-chatbot-input-area {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-shrink: 0; /* Prevent input area from shrinking */
        }
        .car-chatbot-input-area input {
            flex: 1;
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
            outline: none;
            font-size: 1rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        .car-chatbot-input-area input:focus {
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.15);
        }

        .car-chatbot-input-area button {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            background-color: #4299e1; /* Blue */
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .car-chatbot-input-area button:hover {
            background-color: #3182ce; /* Darker blue */
        }

        .car-chatbot-input-area button:disabled{
            background-color: #a0aec0; /* Gray */
            cursor: not-allowed;
            opacity: 0.6;
        }

        #car-chatbot-loading-indicator {
            display: none;
            margin: 1rem auto;
            border-radius: 50%;
            width: 2rem;
            height: 2rem;
            border: 0.3rem solid rgba(66, 153, 225, 0.3);
            border-top: 0.3rem solid #4299e1;
            animation: spin 1s linear infinite;
             flex-shrink: 0; /* Prevent indicator from shrinking */
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .car-chatbot-suggestion-box {
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            background-color: #edf2f7; /* Light gray */
            border: 1px solid #e2e8f0;
             flex-shrink: 0; /* Prevent suggestion box from shrinking */
        }

        .car-chatbot-suggestion-box p {
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #4a5568; /* Darker gray */
            font-size: 0.95rem; /* Adjusted font size */
        }

        .car-chatbot-suggestion-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .car-chatbot-suggestion-list li {
            background-color: #f56565; /* Red */
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 0.9rem; /* Adjusted font size */
            white-space: nowrap;
        }

        .car-chatbot-suggestion-list li:hover {
            background-color: #c53030; /* Darker red */
        }
        .car-chatbot-icon{
            width: 1.2rem; /* Slightly larger icon */
            height: 1.2rem; /* Slightly larger icon */
        }

        #car-chatbot-toggle-button {
            position: fixed;
            bottom: 20px;
            left: 20px; /* Position on the left */
            z-index: 1001;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            background-color: #4299e1; /* Blue */
            color: white;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s ease, transform 0.3s ease; /* Added transform transition */
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); /* Added shadow */
        }

        #car-chatbot-toggle-button:hover {
            background-color: #3182ce; /* Darker blue */
             transform: scale(1.05); /* Slightly enlarge on hover */
        }

        /* Responsive adjustments for chatbot */
        @media (max-width: 600px) {
            .car-chatbot-container {
                width: 95%;
                left: 2.5%;
                right: 2.5%;
                bottom: 10px;
                max-width: none; /* Allow full width */
                height: 75vh; /* Slightly less height on small screens, increased slightly */
            }
             #car-chatbot-toggle-button {
                left: 10px;
                bottom: 10px;
                padding: 0.6rem 1.2rem; /* Smaller padding */
                font-size: 0.9rem; /* Smaller font size */
             }
             .car-chatbot-icon{
                width: 1rem;
                height: 1rem;
             }
             .car-chatbot-header h1 {
                font-size: 1.4rem; /* Slightly larger on small screens */
             }
             .car-chatbot-message-content,
             .car-chatbot-input-area input,
             .car-chatbot-suggestion-box p,
             .car-chatbot-suggestion-list li {
                 font-size: 0.9rem; /* Slightly larger font in chat on small screens */
             }
             .car-chatbot-input-area button {
                 padding: 0.6rem 1rem; /* Smaller button padding */
             }
        }


    </style>
</head>
<body>
    <video id="background-video" autoplay loop muted>
        <source src="https://videos.pexels.com/video-files/3752531/3752531-hd_1920_1080_24fps.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <header class="w-full text-center py-4 text-green-500 text-4xl font-bold relative z-10">
        <h1>Car Repair Assistance</h1>
    </header>

    <div class="content max-w-4xl w-full text-center mt-8 relative z-10">
        <h1 class="text-5xl font-extrabold text-green-700 mb-4 hover:text-teal-700 transition duration-300">ENGINES</h1>
        <p class="text-white font-bold text-lg mb-8">ANY PROBLEMS WITH THE ENGINE? YOU ARE AT THE RIGHT PLACE!</p>

        <div class="search-bar flex justify-center mb-12">
            <input type="text" id="searchInput" placeholder="Search your problem..."
                   class="p-3 text-lg border border-gray-300 rounded-l-lg w-full max-w-md focus:outline-none focus:ring-2 focus:ring-green-500">
            <button onclick="searchProblems()"
                    class="p-3 text-lg bg-green-600 text-white border-none rounded-r-lg cursor-pointer hover:bg-green-700 transition duration-300">
                Search
            </button>
        </div>
    </div>

    <div class="cards-container grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-12 justify-center relative z-10 pb-20">
        <div class="card bg-white p-6 rounded-xl shadow-lg text-center cursor-pointer transition transform hover:translate-y-[-5px] hover:shadow-xl">
            <h3 class="text-3xl font-semibold text-green-800 mb-3">1</h3>
            <p class="text-gray-700 text-lg mb-4 hover:text-teal-600 transition duration-300">ENGINE MISSFIRING</p>
            <select onchange="optionClicked(this.value)"
                    class="w-full p-2 border border-gray-300 rounded-md text-base focus:outline-none focus:ring-2 focus:ring-green-500">
                <option value="" selected disabled>Select Option</option>
                <option value="A">ROUGH IDILING OR RUNNING</option>
                <option value="B">REDUCE FUEL EFFICIENCY</option>
                <option value="C">ENGINE SHAKING OR JERKING.</option>
            </select>
        </div>

        <div class="card bg-white p-6 rounded-xl shadow-lg text-center cursor-pointer transition transform hover:translate-y-[-5px] hover:shadow-xl">
            <h3 class="text-3xl font-semibold text-green-800 mb-3">2</h3>
            <p class="text-gray-700 text-lg mb-4 hover:text-teal-600 transition duration-300">REGULAR MAINTENANCE TIP</p>
            <select onchange="optionClicked(this.value)"
                    class="w-full p-2 border border-gray-300 rounded-md text-base focus:outline-none focus:ring-2 focus:ring-green-500">
                <option value="" selected disabled>Select Option</option>
                <option value="D">CHECK OIL THROUGH METER</option>
                <option value="E">OVERHEATING</option>
                <option value="F">BATTERY ISSUE</option>
            </select>
        </div>

        <div class="card bg-white p-6 rounded-xl shadow-lg text-center cursor-pointer transition transform hover:translate-y-[-5px] hover:shadow-xl">
            <h3 class="text-3xl font-semibold text-green-800 mb-3">3</h3>
            <p class="text-gray-700 text-lg mb-4 hover:text-teal-600 transition duration-300">ENGINE OVERHEATING</p>
            <select onchange="optionClicked(this.value)"
                    class="w-full p-2 border border-gray-300 rounded-md text-base focus:outline-none focus:ring-2 focus:ring-green-500">
                <option value="" selected disabled>Select Option</option>
                <option value="G">TEMPERATURE GAUGE RISING ABOVE NORMAL</option>
                <option value="H">Steam coming from the hood</option>
                <option value="I">Coolant leaking under the car</option>
            </select>
        </div>

        <div class="card bg-white p-6 rounded-xl shadow-lg text-center cursor-pointer transition transform hover:translate-y-[-5px] hover:shadow-xl">
            <h3 class="text-3xl font-semibold text-green-800 mb-3">4</h3>
            <p class="text-gray-700 text-lg mb-4 hover:text-teal-600 transition duration-300">OIL LEAKS</p>
            <select onchange="optionClicked(this.value)"
                    class="w-full p-2 border border-gray-300 rounded-md text-base focus:outline-none focus:ring-2 focus:ring-green-500">
                <option value="" selected disabled>Select Option</option>
                <option value="J">Oil spots under the car.</option>
                <option value="K">Burning oil smell</option>
                <option value="L">Low oil levels on the dipstick.</option>
            </select>
        </div>

        <div class="card bg-white p-6 rounded-xl shadow-lg text-center cursor-pointer transition transform hover:translate-y-[-5px] hover:shadow-xl">
            <h3 class="text-3xl font-semibold text-green-800 mb-3">5</h3>
            <p class="text-gray-700 text-lg mb-4 hover:text-teal-600 transition duration-300">FAULTY ALTERNATOR</p>
            <select onchange="optionClicked(this.value)"
                    class="w-full p-2 border border-gray-300 rounded-md text-base focus:outline-none focus:ring-2 focus:ring-green-500">
                <option value="" selected disabled>Select Option</option>
                <option value="M">Car wonâ€™t start or starts with difficulty.</option>
                <option value="N">Battery warning light on the dashboard.</option>
                <option value="O">Electrical accessories, like lights or radio, not working properly.</option>
            </select>
        </div>

        <div class="card bg-white p-6 rounded-xl shadow-lg text-center cursor-pointer transition transform hover:translate-y-[-5px] hover:shadow-xl">
            <h3 class="text-3xl font-semibold text-green-800 mb-3">6</h3>
            <p class="text-gray-700 text-lg mb-4 hover:text-teal-600 transition duration-300">COOLANT LEAKS</p>
            <select onchange="optionClicked(this.value)"
                    class="w-full p-2 border border-gray-300 rounded-md text-base focus:outline-none focus:ring-2 focus:ring-green-500">
                <option value="" selected disabled>Select Option</option>
                <option value="P">Radiator Leak</option>
                <option value="Q">Hose Leak</option>
                <option value="R">Regular Maintenance Tips for Coolant System:</option>
            </select>
        </div>
    </div>

    <footer class="w-full bg-gray-800 text-white py-8 mt-12 relative z-10">
        <div class="container mx-auto flex flex-col md:flex-row justify-around text-center md:text-left px-4">
            <div class="footer-section mb-6 md:mb-0 md:w-1/3 px-4">
                <h3 class="text-xl font-semibold mb-3 text-gray-200">About Us</h3>
                <p class="text-gray-400 text-sm">We are committed to helping you solve car-related problems efficiently and affordably.</p>
            </div>

            <div class="footer-section mb-6 md:mb-0 md:w-1/3 px-4">
                <h3 class="text-xl font-semibold mb-3 text-gray-200">Help</h3>
                <p class="text-gray-400 text-sm">Need assistance? Browse our FAQs or contact support for more information.</p>
            </div>

            <div class="footer-section md:w-1/3 px-4">
                <h3 class="text-xl font-semibold mb-3 text-gray-200">Contact</h3>
                <p class="text-gray-400 text-sm">Email: support@carrepairhelp.com</p>
                <p class="text-gray-400 text-sm">Phone: +123 456 7890</p>
            </div>
        </div>
    </footer>

    <div class="overlay" id="overlay" onclick="closePopup()"></div>

    <div class="popup" id="popupA">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">CHECK AND REPLACE SPARK PLUGS:</h2>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Spark+Plugs+Step+1" alt="Spark Plugs Step 1">
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Spark+Plugs+Step+2" alt="Spark Plugs Step 2">
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Spark+Plugs+Step+3" alt="Spark Plugs Step 3">
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Spark+Plugs+Step+4" alt="Spark Plugs Step 4">
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Spark+Plugs+Step+5" alt="Spark Plugs Step 5">
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Spark+Plugs+Step+6" alt="Spark Plugs Step 6">
        <p class="text-gray-700 mt-4">Inspect the spark plugs for wear and tear. Replace any faulty spark plugs.</p>
    </div>

    <div class="popup" id="popupB">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Inspect Ignition Coils:</h2>
        <p class="text-gray-700 mb-2">1. Maintain Your Vehicle Regularly Regular maintenance keeps your engine tuned and improves car mileage.</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Fuel+Efficiency+Tip+1" alt="Fuel Efficiency Tip 1">
        <p class="text-gray-700 mb-2">2. Drive at the Best Speed Driving speed is essential when it comes to ways to save fuel</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Fuel+Efficiency+Tip+2" alt="Fuel Efficiency Tip 2">
        <p class="text-gray-700 mb-2">3. Turn Off Engine when Idle</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Fuel+Efficiency+Tip+3" alt="Fuel Efficiency Tip 3">
        <p class="text-gray-700 mb-2">4. Use Quality Fuel & Lubricants</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Fuel+Efficiency+Tip+4" alt="Fuel Efficiency Tip 4">
        <p class="text-gray-700 mb-2">5. Reduce Excess Weight</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Fuel+Efficiency+Tip+5" alt="Fuel Efficiency Tip 5">
        <p class="text-gray-700 mt-4">Check for damaged or malfunctioning ignition coils. Replace any defective ignition coils.</p>
    </div>

    <div class="popup" id="popupC">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Clean or Replace Fuel Injectors:</h2>
        <p class="text-gray-700">Use a fuel injector cleaner to remove any build-up. If cleaning doesn't help, consider replacing the faulty fuel injectors.</p>
    </div>

    <div class="popup" id="popupD">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Change the engine oil and filter:</h2>
        <p class="text-gray-700 mb-2">Step 1 â€“ Let the engine cool. When the engine runs, the metal surface of the carâ€™s engine gets extremely hot.</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Check+Oil+Step+1" alt="Check Oil Step 1">
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Check+Oil+Step+2" alt="Check Oil Step 2">
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Check+Oil+Step+3" alt="Check Oil Step 3">
        <p class="text-gray-700 mb-2">Step 2 â€“ Pull out and clean the oil dipstick. The Engine oil level is measured with a dipstick.</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Check+Oil+Step+4" alt="Check Oil Step 4">
        <p class="text-gray-700 mb-2">Step 3- Check the oil film on the dipstick</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Check+Oil+Step+5" alt="Check Oil Step 5">
        <p class="text-gray-700 mb-2">Step 4 â€“ Top up the engine oil and repeat the process.</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Check+Oil+Step+6" alt="Check Oil Step 6">
        <p class="text-gray-700 mt-4 font-bold">USE THE CORRECT TYPE OF GRADE OIL FOR YOUR VEHICLE RECOMMENDED BY THE MECHANIC</p>
    </div>

    <div class="popup" id="popupE">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Check Coolant Levels for Overheating:</h2>
        <p class="text-gray-700 mb-2">1. Turn Off the Air Conditioning: If your engine is overheating, turn off the air conditioning to reduce the load on the engine</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Overheating+Tip+1" alt="Overheating Tip 1">
        <p class="text-gray-700 mb-2">Pull Over and Turn Off the Engine: Safely pull over to the side of the road and turn off the engine. Let the engine cool down before attempting any further inspection</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Overheating+Tip+2" alt="Overheating Tip 2">
        <p class="text-gray-700 mb-2">3. Check Coolant Levels: Once the engine has cooled, check the coolant level in the radiator or coolant reservoir. If it's low, top it off with the appropriate coolant mixture</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Overheating+Tip+3" alt="Overheating Tip 3">
        <p class="text-gray-700 mb-2">4. Inspect for Leaks: Look for any visible leaks in the cooling system, including hoses, the radiator, and the water pump. Leaks can cause a loss of coolant and lead to overheating.</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Overheating+Tip+4" alt="Overheating Tip 4">
        <p class="text-gray-700 mb-2">Check the Radiator Cap: Ensure the radiator cap is properly sealed and not damaged. A faulty radiator cap can cause coolant to escape or not maintain the correct pressure.</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Overheating+Tip+5" alt="Overheating Tip 5">
        <p class="text-gray-700 mb-2">6. Bleed the Cooling System: Air pockets in the cooling system can cause overheating. Bleed the system to remove any trapped air</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Overheating+Tip+6" alt="Overheating Tip 6">
        <p class="text-gray-700 mb-2">7. Inspect the Thermostat: A stuck thermostat can prevent coolant from circulating properly. Check if the thermostat is opening and closing correctly</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Overheating+Tip+7" alt="Overheating Tip 7">
        <p class="text-gray-700 mb-2">8. Check the Cooling Fans: Ensure the cooling fans are working properly. Test the fans and check the fuses and relays for the fan circuit</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Overheating+Tip+8" alt="Overheating Tip 8">
        <p class="text-gray-700 mb-2">9. Inspect the Water Pump: A failing water pump can lead to overheating. Check for any signs of wear or damage</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Overheating+Tip+9" alt="Overheating Tip 9">
        <p class="text-gray-700 mt-4">Regularly check the coolant level and top it up if needed. Use the correct type of coolant specified by the manufacturer. Inspect Radiator and Hoses: Check for any leaks or damage to the radiator and hoses. Clean the radiator fins to ensure proper airflow.</p>
    </div>

    <div class="popup" id="popupF">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Regular Battery Inspection:</h2>
        <p class="text-gray-700 mb-2">1. Regular Inspection: Check your battery regularly for any signs of corrosion, leaks, or damage. Look at the terminals and cables for any signs of corrosion or loose connections.</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Battery+Tip+1" alt="Battery Tip 1">
        <p class="text-gray-700 mb-2">2. Clean the Battery Terminals: Corrosion can build up on the battery terminals, affecting performance. Clean them with a mixture of baking soda and water, using a brush to scrub away any buildup.</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Battery+Tip+2" alt="Battery Tip 2">
        <p class="text-gray-700 mb-2">3. Secure the Battery: Make sure the battery is properly secured in its tray. A loose battery can vibrate and cause internal damage or short circuits.</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Battery+Tip+3" alt="Battery Tip 3">
        <p class="text-gray-700 mb-2">4. Keep the Battery Charged: If you don't drive your car often, consider using a trickle charger to keep the battery charged. Short trips can also prevent the battery from fully charging, so try to drive longer distances occasionally.</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Battery+Tip+4" alt="Battery Tip 4">
        <p class="text-gray-700 mb-2">5. Check the Electrolyte Level: For batteries that are not maintenance-free, check the electrolyte level and top it off with distilled water if necessary. Make sure not to overfill.</p>
        <img src="https://placehold.co/600x400/e9e9eb/333?text=Battery+Tip+5" alt="Battery Tip 5">
        <p class="text-gray-700 mb-2">6. Test the Battery: Have your battery tested periodically, especially before winter or long trips. Most auto parts stores offer free battery testing.</p>
        <img src="https://placehold.co/600x400/d3d3d3/333?text=Battery+Tip+6" alt="Battery Tip 6">
        <p class="text-gray-700 mt-4">Check the battery terminals and cables for corrosion and clean them if necessary. Ensure the battery is securely mounted and connections are tight. Test Battery Voltage: Use a multimeter to check the battery voltage regularly. A fully charged battery should read around 12.6 volts.</p>
    </div>

    <div class="popup" id="popupG">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Check Coolant Levels:</h2>
        <p class="text-gray-700">Ensure the coolant reservoir is filled to the appropriate level. Refill with the correct coolant type if necessary.</p>
    </div>

    <div class="popup" id="popupH">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Inspect the Thermostat:</h2>
        <p class="text-gray-700">Check if the thermostat is opening and closing properly. Replace the thermostat if it's faulty.</p>
    </div>

    <div class="popup" id="popupI">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Radiator Maintenance:</h2>
        <p class="text-gray-700">Clean the radiator fins to remove any debris or dirt. Check for any blockages in the radiator and flush it if needed.</p>
    </div>

    <div class="popup" id="popupJ">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Regular Oil Changes:</h2>
        <p class="text-gray-700">Change the engine oil and filter according to the manufacturerâ€™s recommended intervals. Use the correct type and grade of oil for your vehicle.</p>
    </div>

    <div class="popup" id="popupK">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Inspect for Leaks:</h2>
        <p class="text-gray-700">Regularly check for any signs of oil leaks around the engine. Inspect the gaskets and seals for wear and replace them if necessary.</p>
    </div>

    <div class="popup" id="popupL">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Tighten Oil Pan Bolts:</h2>
        <p class="text-gray-700">Ensure the oil pan bolts are properly tightened to prevent leaks.</p>
    </div>

    <div class="popup" id="popupM">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Inspect Alternator Belt:</h2>
        <p class="text-gray-700">Ensure the alternator belt is not loose, worn, or broken. Replace it if necessary to ensure proper function.</p>
    </div>

    <div class="popup" id="popupN">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Test Alternator Output:</h2>
        <p class="text-gray-700">Use a voltmeter to check the alternator's output voltage. It should be around 13.8 to 14.2 volts when the engine is running. If the output is outside this range, the alternator may need to be repaired or replaced.</p>
    </div>

    <div class="popup" id="popupO">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Check Battery Health:</h2>
        <p class="text-gray-700">Test the battery to ensure itâ€™s still in good condition. Sometimes, a faulty alternator can damage the battery, which would also need to be replaced.</p>
    </div>

    <div class="popup" id="popupP">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Inspect Radiator for Leaks:</h2>
        <p class="text-gray-700">Check the radiator for any visible signs of leaks, corrosion, or physical damage. If the damage is minor, consider using a radiator leak sealant as a temporary fix. Replace Radiator: If the radiator is significantly damaged or corroded, it may need to be replaced entirely. Ensure the new radiator is properly installed and filled with the correct type of coolant. Maintain Coolant Levels: Regularly check and maintain the coolant levels in the reservoir to prevent overheating.</p>
    </div>

    <div class="popup" id="popupQ">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Inspect and Tighten Hoses:</h2>
        <p class="text-gray-700">Check all coolant hoses for signs of wear, cracking, or swelling. Ensure all hose clamps are tight and secure. Replace Damaged Hoses: If any hoses are found to be damaged, replace them with new ones. Use high-quality hoses and clamps to ensure a secure fit. Regular Hose Maintenance: Periodically inspect hoses for signs of wear and replace them as part of routine maintenance to prevent future leaks.</p>
    </div>

    <div class="popup" id="popupR">
        <span class="close" onclick="closePopup()">&times;</span>
        <h2 class="text-2xl font-bold mb-4 text-green-700">Regular Coolant Checks:</h2>
        <p class="text-gray-700">Frequently check the coolant levels and top up if necessary with the correct type of coolant. Flush Coolant System: Periodically flush the coolant system to remove any debris or contaminants that could cause blockages or corrosion. Monitor Temperature Gauge: Keep an eye on the temperature gauge to catch any signs of overheating early and address them promptly.</p>
    </div>

    <button id="car-chatbot-toggle-button">
        <img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/message-circle.svg" alt="Chatbot" class="car-chatbot-icon">
        Chatbot
    </button>

    <div class="car-chatbot-container" id="car-chatbot-container">
        <header class="car-chatbot-header">
            <h1>CarChatBot</h1>
            <p class="text-gray-600">Your Virtual Car Assistant</p>
        </header>
        <div class="car-chatbot-messages" id="car-chatbot-messages">
            </div>
        <div class="car-chatbot-input-area">
            <input type="text" id="car-chatbot-user-input" placeholder="Enter your car problem...">
            <button id="car-chatbot-send-button" disabled>
                <img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/send.svg" alt="Send" class="car-chatbot-icon">
                Send
            </button>
        </div>
        <div id="car-chatbot-loading-indicator"></div>
        <div class="car-chatbot-suggestion-box" id="car-chatbot-suggestion-box">
            <p>Here are some common car problems:</p>
            <ul class="car-chatbot-suggestion-list" id="car-chatbot-suggestion-list">
                </ul>
        </div>
    </div>


    <button class="help-button" onclick="window.location.href='https://query-fire-base-v1.vercel.app/'">Need More Help?</button>

    <script>
        // --- Existing Website Script (modified) ---

        // Popup functionality (kept from previous version)
        function optionClicked(option) {
            document.querySelectorAll(".popup").forEach(popup => popup.style.display = "none");
            const popup = document.getElementById(`popup${option}`);
            if (popup) {
                popup.style.display = "block";
                document.getElementById("overlay").style.display = "block";
            }
        }

        function closePopup() {
            document.querySelectorAll(".popup").forEach(popup => popup.style.display = "none");
            document.getElementById("overlay").style.display = "none";
        }

        // Search Functionality (kept from previous version)
        function searchProblems() {
            const input = document.getElementById("searchInput").value.toLowerCase();
            const cards = document.querySelectorAll(".card");

            cards.forEach(card => {
                const cardText = card.querySelector("p").textContent.toLowerCase();
                // Also check the options in the select dropdown
                const selectOptions = Array.from(card.querySelectorAll("select option")).map(option => option.textContent.toLowerCase());
                const optionsMatch = selectOptions.some(optionText => optionText.includes(input));

                if (cardText.includes(input) || optionsMatch) {
                    card.style.display = "block"; // Show the card if it matches the search
                } else {
                    card.style.display = "none"; // Hide the card if it doesn't match
                }
            });
        }

        // Function to handle the help button click (already provided)
        function openHelpPage() {
            window.location.href = 'https://query-fire-base-v1.vercel.app/';
        }

        // Add event listener for Enter key in search input (kept from previous version)
        document.getElementById("searchInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault(); // Prevent default form submission
                searchProblems();
            }
        });


        // --- New Chatbot Script ---

        const chatMessages = document.getElementById('car-chatbot-messages');
        const userInput = document.getElementById('car-chatbot-user-input');
        const sendButton = document.getElementById('car-chatbot-send-button');
        const loadingIndicator = document.getElementById('car-chatbot-loading-indicator');
        const suggestionList = document.getElementById('car-chatbot-suggestion-list');
        const suggestionBox = document.getElementById('car-chatbot-suggestion-box');
        const chatbotContainer = document.getElementById('car-chatbot-container');
        const chatbotToggleButton = document.getElementById('car-chatbot-toggle-button');


        // Sample car problems and solutions (Knowledge Base)
        const knowledgeBase = {
            "engine won't start": "Check the battery, starter motor, and fuel supply.",
            "flat tire": "Replace the tire with the spare tire. Consider using a tire repair kit. Visit a service station.",
            "overheating": "Check coolant level, radiator, and water pump. Stop the car immediately to avoid damage.",
            "brakes not working": "Check brake fluid level and brake pads. This is an emergency, seek professional help immediately!",
            "car battery dead": "Jump-start the battery or replace it.",
            "check engine light on": "This could be many issues. Check your car's computer with an OBD-II scanner.",
            "low tire pressure": "Inflate your tires to the recommended pressure.",
            "squealing brakes": "This often indicates worn brake pads. Have them inspected.",
            "car shakes when driving": "Could be due to unbalanced tires, wheel alignment, or suspension issues.",
            "smoke from engine": "Stop the car immediately, this could indicate a serious problem like a coolant leak or electrical fire.",
            "transmission problems": "Difficulty shifting gears can indicate a transmission issue. Get it checked by a mechanic.",
            "steering wheel hard to turn": "Check power steering fluid. Could also be a problem with the power steering pump.",
            "exhaust smoking": "Blue smoke indicates burning oil, white smoke could be a coolant leak, black smoke could be a fuel mixture problem.",
            "engine stalls frequently": "Could be due to faulty spark plugs, fuel filter, or other fuel system issues.",
            "AC not working": "Check refrigerant levels, compressor, and fuses.",
        };

        const commonProblems = [
            "engine won't start",
            "flat tire",
            "overheating",
            "brakes not working",
            "car battery dead",
            "check engine light on",
            "low tire pressure",
            "squealing brakes",
        ];

        function populateSuggestions() {
            suggestionList.innerHTML = ''; // Clear old suggestions
            commonProblems.forEach(problem => {
                const listItem = document.createElement('li');
                listItem.textContent = problem;
                listItem.addEventListener('click', () => {
                    userInput.value = problem;
                    handleInputChange(); // Enable send button
                });
                suggestionList.appendChild(listItem);
            });
        }

        function getBotResponse(userInputText) {
            const lowerCaseInput = userInputText.toLowerCase();
            let response = "I'm sorry, I don't have information on that problem. Please try rephrasing, or consult a mechanic.";

            for (const problem in knowledgeBase) {
                if (lowerCaseInput.includes(problem)) {
                    response = knowledgeBase[problem];
                    break;
                }
            }
            return response;
        }

        function addMessage(sender, text) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('car-chatbot-message', sender);
            const messageContentDiv = document.createElement('div');
            messageContentDiv.classList.add('car-chatbot-message-content');
            messageContentDiv.textContent = text;
            messageDiv.appendChild(messageContentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleInputChange() {
            sendButton.disabled = !userInput.value.trim();
        }

        function sendMessage() {
            const userText = userInput.value;
            if (!userText.trim()) return;

            addMessage('user', userText);
            userInput.value = '';
            sendButton.disabled = true;
            loadingIndicator.style.display = 'block';
            suggestionBox.style.display = 'none'; // Hide suggestions while loading

            // Simulate a delay for the bot response
            setTimeout(() => {
                const botResponse = getBotResponse(userText);
                addMessage('bot', botResponse);
                loadingIndicator.style.display = 'none';
                suggestionBox.style.display = 'block'; // Show suggestions again
            }, 1500); // 1.5 second delay
        }

        // Event Listeners for the new chatbot
        userInput.addEventListener('input', handleInputChange);
        sendButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' && !sendButton.disabled) {
                sendMessage();
            }
        });

        chatbotToggleButton.addEventListener('click', () => {
            chatbotContainer.classList.toggle('active');
            if (chatbotContainer.classList.contains('active')) {
                // Change button text/icon when chatbot is open
                chatbotToggleButton.innerHTML = `<img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/x-circle.svg" alt="Close" class="car-chatbot-icon"> Close`;
            } else {
                 // Change button text/icon when chatbot is closed
                chatbotToggleButton.innerHTML = `<img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/message-circle.svg" alt="Chatbot" class="car-chatbot-icon"> Chatbot`;
            }
        });

        // Initialize the chatbot on window load
        window.onload = () => {
            addMessage('bot', "Hello! I'm CarChatBot, your virtual car assistant. What problem are you experiencing?");
            populateSuggestions(); // Populate initial suggestions
        };

    </script>

</body>
</html>
